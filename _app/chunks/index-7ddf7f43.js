import{$ as n}from"./index-3a3d0142.js";import{w as g,_ as se,d as f}from"./preload-helper-b55195a1.js";var N=Object.freeze(Object.defineProperty({__proto__:null,get storeVersion(){return V},get storedLocale(){return Pe},get openScreen(){return _e},get highContrast(){return z},get showAllHints(){return j},get swapEnterBackspace(){return q},get keyboardLayout(){return B},get dyslexicFont(){return J},get allowDancing(){return U},get shareURL(){return I},get shareTimes(){return K},get lastPlayedDaily(){return ee},get stats(){return R},get timeStats(){return h},get lastDailyDetail(){return C},get lastRandomDetail(){return P},get lastGameDetail(){return Oe},get newUser(){return $e},get debugMode(){return $},get answerDaily(){return S},get answerRandom(){return W},get guessesDaily(){return k},get guessesRandom(){return _},get lastPlayedDailyWasHard(){return E},get lastPlayedRandomWasHard(){return L},get hardMode(){return Re},get changeHardMode(){return Ge},get gameMode(){return m},get lastPlayedWasHard(){return de},get invalidHardModeGuess(){return ke},get notEnoughLetters(){return Me},get invalidWord(){return We},get invalidWordPreview(){return Ee},get boardContent(){return F},get answer(){return T},get guesses(){return y},get updateGuesses(){return Le},get guessTimesDaily(){return Q},get guessTimesRandom(){return Y},get guessTimes(){return O},get currentRow(){return Z},get currentTile(){return ce},get gameWon(){return ge},get gameFinished(){return X},get validLetters(){return Ce},get initGameState(){return fe}},Symbol.toStringTag,{value:"Module"})),A={};function u(e,t){const s=typeof localStorage!="undefined";function i(r,a){!s||localStorage.setItem(r,JSON.stringify(a))}if(!A[e]){const r=g(t,o=>{const d=s?localStorage.getItem(e):null;if(d&&o(JSON.parse(d)),s){const p=b=>{b.key===e&&o(b.newValue?JSON.parse(b.newValue):null)};return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)}}),{subscribe:a,set:l}=r;A[e]={set(o){i(e,o),l(o)},update(o){const d=o(n(r));i(e,d),l(d)},subscribe:a}}return A[e]}const c=6,G=5;let v;async function ae(){v||(v=(await se(()=>import("./targets-filtered-ad800e36.js"),[])).default)}let M;async function we(){M||(M=(await se(()=>import("./dictionary-filtered-f84f8acf.js"),[])).default)}async function ze(e){return M||await we(),M.includes(e)}function ne(){const e=[];for(let t=0;t<c;t++){const s=[];e[t]=s;for(let i=0;i<G;i++)s.push({id:i,letter:"",scored:!1,distance:0,magnitude:0,polarity:0})}return e}function ye(e,t,s,i,r){const a=w.indexOf(e)-w.indexOf(t[i]),l=a===0?0:a>0?1:-1;let o=0;if(s===0)o=c;else{const d=r[s-1][i];d.polarity!==l?o=c:Math.abs(a)>Math.abs(d.distance)?o=d.magnitude+1:Math.abs(a)<Math.abs(d.distance)&&(o=d.magnitude-1);const p=r.find((b,me)=>me<s&&b[i].letter===e);p&&(o=p[i].magnitude)}return a===0&&(o=0),{id:i,scored:!0,distance:a,magnitude:o,polarity:l,letter:e}}function re(e,t,s){if(s===G)return new Set;const i=new Set(w);return w.forEach(r=>{if(!!i.has(r))for(let a=0;a<t;a++){const l=e[a][s];l.distance===0&&r!==l.letter&&i.delete(r),l.distance<0&&r<=l.letter&&i.delete(r),l.distance>0&&r>=l.letter&&i.delete(r)}}),i}function he(e){return e.map(t=>t.letter).join("")}function pe(e){return[w.find(t=>e.has(t)),[...w].reverse().find(t=>e.has(t))]}function je(e,t){const s=he(e[t]);return!(s.length<G||s.includes(" "))}const oe=new Date(2022,1,25),qe=()=>{let e=0;const t=new Date(oe),s=new Date;for(s.setHours(0,0,0,0);t<s;)e++,t.setDate(t.getDate()+1);return e};async function Be(e){return await ae(),v[e%v.length]}const Je=e=>{const t=new Date(oe);let s=new Date(t);return s.setDate(t.getDate()+e+1),s};function be(e){return e[Math.floor(Math.random()*e.length)]}async function Ue(){return await ae(),be(v)}function De(e){let t=0;for(const[s,i]of[...e].entries())t+=w.indexOf(i)<<s*5;return t.toString(36)}function Ie(e){if(!e)return!1;let t="";for(let s=0;s<G;s++)t+=w[(parseInt(e,36)&31<<s*5)>>s*5];return t.length===5&&t}const w="abcdefghijklmnopqrstuvwxyz".split(""),ve=["alphabetic","qwerty","azerty","qwertz","dvorak","colemak"],Ke=[{value:"alphabetic",label:"Alphabetic",layout:[["a","b","c","d","e","f","g","h","i","j"],["k","l","m","n","o","p","q","r","s","t"],["u","v","w","x","y","z"]],wideKeysRow:2},{value:"qwerty",label:"QWERTY",layout:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],wideKeysRow:2},{value:"azerty",label:"AZERTY",layout:[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["z","x","c","v","b","n"]],wideKeysRow:2},{value:"qwertz",label:"QWERTZ",layout:[["q","w","e","r","t","z","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["y","x","c","v","b","n","m"]],wideKeysRow:2},{value:"dvorak",label:"Dvorak",layout:[["p","y","f","g","c","r","l"],["a","o","e","u","i","d","h","t","n","s"],["q","j","k","x","b","m","w","v","z"]],wideKeysRow:0},{value:"colemak",label:"Colemak",layout:[["q","w","f","p","g","j","l","u","y"],["a","r","s","t","d","h","n","e","i","o"],["z","x","c","v","b","k","m"]],wideKeysRow:2}],ie=()=>({currentStreak:0,bestStreak:0,totalGames:0,wonGames:0,distribution:new Array(c).fill(0)}),x=()=>({gameCount:0,guessTotals:new Array(c).fill(0),guessCounts:new Array(c).fill(0),fastestGame:0}),le=e=>e.at(-1)-e[0];function Fe(e){const t=n(m),s=n($);let i=!1;t==="daily"&&(i=le(n(O))<n(h).fastestGame,s&&console.log("Calling updateStats"),Se(e)),s&&console.log(`Calling saveGameDetail (fastest = ${i})`),Te(i)}function Se(e){const t=n($),s=n(y).length;t&&console.log("Updating store.stats"),R.update(a=>{t&&console.log(`Previous stats: ${JSON.stringify(a)}`),t&&console.log(`Previous streak: ${a.currentStreak}`);const l=e?a.currentStreak+1:0;t&&console.log(`New streak: ${l}`);const o=[...a.distribution];return t&&console.log(`Previous distribution: ${o}`),o[s-1]++,t&&console.log(`New distribution: ${o}`),{currentStreak:l,bestStreak:l>a.bestStreak?l:a.bestStreak,totalGames:a.totalGames+1,wonGames:a.wonGames+(e?1:0),distribution:o}}),t&&console.log(`Saved stats: ${JSON.stringify(n(R))}`);const i=n(O),r=le(i);t&&console.log("Updating store.timeStats"),t&&console.log(`gameTime = ${r}`),h.update(a=>{t&&console.log(`Previous timeStats: ${JSON.stringify(a)}`);const l=a.guessTotals.map((o,d)=>d<s?o+(i[d+1]-i[d]):o);return t&&console.log(`guessTotals = ${l}`),{gameCount:a.gameCount+1,guessTotals:l,guessCounts:a.guessCounts.map((o,d)=>d<s?o+1:o),fastestGame:a.fastestGame===0||r<a.fastestGame?r:a.fastestGame}}),t&&console.log(`Saved timeStats: ${JSON.stringify(n(h))}`)}function Te(e){const t=n($),s=n(m);t&&console.log(`Saving game detail for mode: ${s}`),N[s==="daily"?"lastDailyDetail":"lastRandomDetail"].set({mode:s,dayNumber:s==="daily"?n(ee)+1:0,hardMode:n(de),answer:n(T),guesses:n(y),guessTimes:n(O),hash:s==="daily"?null:De(n(T)),fastest:e}),t&&console.log(`Saved game detail: ${JSON.stringify(n(N[s==="daily"?"lastDailyDetail":"lastRandomDetail"]))}`)}function Qe(e){N[n(m)==="daily"?"guessTimesDaily":"guessTimesRandom"].update(t=>(t[e]=new Date().getTime(),t))}const S=u("wp-answer",""),W=u("wp-answerRandom",""),k=u("wp-guesses",[]),_=u("wp-guessesRandom",[]),E=u("wp-lastPlayedWasHard",!1),L=u("wp-lastPlayedRandomWasHard",!1),ue=u("wp-hardMode",!1),Re=f(ue,e=>e),Ge=e=>{if(!n(X)&&n(y).length>0)throw"Can't change that during a game!";ue.set(e)},m=g("daily"),de=f([m,E,L],([e,t,s])=>e==="daily"?t:s),ke=g(!1),Me=g(!1),We=g(!1),Ee=g(!1),F=g(ne()),T=f([m,S,W],([e,t,s])=>e==="daily"?t:s),y=f([m,k,_],([e,t,s])=>e==="daily"?t:s);function Le(e){(n(m)==="daily"?k:_).update(e)}const Q=u("wp-guessTimesDaily",[]),Y=u("wp-guessTimesRandom",[]),O=f([m,Q,Y],([e,t,s])=>e==="daily"?t:s),Z=f(y,e=>e.length),ce=g(0),ge=f([T,y],([e,t])=>t.length>0&&t[t.length-1]===e),X=f([Z,ge],([e,t])=>t||e===c),Ce=f([F,Z,ce,X],([e,t,s,i])=>i?new Set:re(e,t,s));function fe(){y.subscribe(e=>{F.update(t=>{const s=ne();return t.forEach((i,r)=>{if(r<e.length){const a=e[r];s[r]=[...a].map((l,o)=>ye(l,n(T),r,o,t))}else r>0&&r===e.length&&s[r].forEach((a,l)=>{a.letterBounds=pe(re(s,r,l))})}),s})})}const V=u("wp-version",0),Pe=u("wp-locale",""),_e=g(null),z=u("wp-highContrast",!1),j=u("wp-showAllHints",!1),q=u("wp-swapEnterBackspace",!1),B=u("wp-keyboardLayout","alphabetic"),J=u("wp-dyslexicFont",!1),U=u("wp-allowDancing",!0),I=u("wp-shareURL",!0),K=u("wp-shareTimes",!1),ee=u("wp-lastPlayedDaily",-1),R=u("wp-stats",ie()),h=u("wp-timeStats",x()),C=u("wp-lastDailyDetail",null),P=u("wp-lastRandomDetail",null),Oe=f([m,C,P],([e,t,s])=>e==="daily"?t:s),$e=g(!1),$=u("wp-debugMode",!1),D=e=>!e||typeof e!="string"&&!(e instanceof String)||e.length!==G,H=(e,t)=>{if(!Array.isArray(e)||e.length!==c)return t;for(let s=0;s<e.length;s++)e[s]>=0||(e[s]=0);return e};function Ae(){[!0,!1].includes(n(z))||z.set(!1),[!0,!1].includes(n(j))||j.set(!1),[!0,!1].includes(n(q))||q.set(!1),[!0,!1].includes(n(J))||J.set(!1),[!0,!1].includes(n(U))||U.set(!0),[!0,!1].includes(n(I))||I.set(!0),[!0,!1].includes(n(K))||K.set(!1),ve.includes(n(B))||B.set("qwerty");const e=n(R);e.currentStreak>=0||(e.currentStreak=0),e.bestStreak>=0||(e.bestStreak=0),e.totalGames>=0||(e.totalGames=0),e.wonGames>=0||(e.wonGames=0),e.distribution=H(e.distribution,ie().distribution),R.set(e);const t=n(h);t.gameCount>=0||(t.gameCount=0),t.fastestGame>=0||(t.fastestGame=0),t.guessTotals=H(t.guessTotals,x().guessTotals),t.guessCounts=H(t.guessCounts,x().guessCounts),h.set(t),[["daily",n(C)],["random",n(P)]].forEach(([r,a])=>{if(a!==null)try{if(a.mode!==r)throw"wrong mode";if(!(a.dayNumber>=0))throw"invalid day number";if(![!0,!1].includes(a.hardMode))throw"invalid hard mode setting";if(D(a.answer))throw"invalid answer";if(!Array.isArray(a.guesses)||a.guesses.length<1||a.guesses.length>c)throw"invalid guesses array";if(a.guesses.some(D))throw"invalid guess(es)";if(!Array.isArray(a.guessTimes)||a.guessTimes.length!==a.guesses.length+1)throw"invalid guessTimes array";const l=new Date().getTime();for(let o=0;o<a.guessTimes.length;o++)if(!(a.guessTimes[o]>=l-1e12))throw"invalid guess time"}catch{r==="daily"?C.set(null):P.set(null)}}),D(n(S))&&S.set(""),D(n(W))&&W.set(""),[!0,!1].includes(n(E))||E.set(!1),[!0,!1].includes(n(L))||L.set(!1),[[k,Q],[_,Y]].forEach(([r,a])=>{try{if(!Array.isArray(n(r))||n(r).length>c||n(r).some(D))throw"invalid guess(es)";if(!Array.isArray(n(a))||n(a).length!==n(r).length+1)throw"invalid guessTimes array";const l=new Date().getTime();for(let o=0;o<n(a).length;o++)if(!(n(a)[o]>=l-1e12))throw"invalid guess time"}catch{r.set([]),a.set([])}})}const He=1,te=n(V);(!te||te<1)&&(ee.set(-1),S.set(""),k.set([]));V.set(He);Ae();fe();export{De as $,Le as A,$ as B,ge as C,$e as D,Fe as E,Ke as F,B as G,q as H,w as I,R as J,h as K,be as L,I as M,K as N,de as O,Oe as P,k as Q,c as R,ee as S,qe as T,S as U,Je as V,G as W,Ge as X,W as Y,Ie as Z,Ue as _,N as a,_ as a0,Be as a1,F as b,Z as c,J as d,We as e,ke as f,ce as g,z as h,Ee as i,y as j,U as k,ne as l,m,Me as n,_e as o,X as p,we as q,Qe as r,Pe as s,pe as t,he as u,Ce as v,T as w,ze as x,je as y,Re as z};
