import{$ as s}from"./index-3a3d0142.js";import{w as d,d as g}from"./index-9ad74cf1.js";import{R as f,e as re,g as Y,c as oe,s as ie,a as le,k as ue,W as de}from"./data-model-38a4e65f.js";var Z=Object.freeze(Object.defineProperty({__proto__:null,get storeVersion(){return z},get storedLocale(){return be},get openScreen(){return Ge},get highContrast(){return P},get showAllHints(){return E},get swapEnterBackspace(){return N},get keyboardLayout(){return B},get dyslexicFont(){return O},get allowDancing(){return _},get shareURL(){return F},get shareTimes(){return x},get preciseTimes(){return U},get lastPlayedDaily(){return K},get stats(){return v},get timeStats(){return D},get lastDailyDetail(){return R},get lastRandomDetail(){return C},get lastGameDetail(){return ve},get newUser(){return Re},get answerDaily(){return h},get answerRandom(){return T},get guessesDaily(){return S},get guessesRandom(){return L},get lastPlayedDailyWasHard(){return b},get lastPlayedRandomWasHard(){return G},get hardMode(){return fe},get changeHardMode(){return me},get gameMode(){return c},get lastPlayedWasHard(){return se},get invalidHardModeGuess(){return we},get notEnoughLetters(){return ye},get invalidWord(){return he},get invalidWordPreview(){return pe},get boardContent(){return j},get answer(){return p},get guesses(){return m},get updateGuesses(){return De},get guessTimesDaily(){return I},get guessTimesRandom(){return J},get guessTimes(){return W},get currentRow(){return $},get currentTile(){return ae},get gameWon(){return ne},get gameFinished(){return q},get validLetters(){return Se},get initGameState(){return Te}},Symbol.toStringTag,{value:"Module"})),k={};function o(e,t){const a=typeof localStorage!="undefined";function u(r,n){!a||localStorage.setItem(r,JSON.stringify(n))}if(!k[e]){const r=d(t,i=>{const w=a?localStorage.getItem(e):null;if(w&&i(JSON.parse(w)),a){const Q=H=>{H.key===e&&i(H.newValue?JSON.parse(H.newValue):null)};return window.addEventListener("storage",Q),()=>window.removeEventListener("storage",Q)}}),{subscribe:n,set:l}=r;k[e]={set(i){u(e,i),l(i)},update(i){const w=i(s(r));u(e,w),l(w)},subscribe:n}}return k[e]}const V=()=>({currentStreak:0,bestStreak:0,totalGames:0,wonGames:0,distribution:new Array(f).fill(0)}),M=()=>({gameCount:0,guessTotals:new Array(f).fill(0),guessCounts:new Array(f).fill(0),fastestGame:0}),ee=e=>e[e.length-1]-e[0];function Ae(e){const t=s(c);let a=!1;t==="daily"&&(a=e&&ee(s(W))<s(D).fastestGame,ge(e)),ce(a)}function ge(e){const t=s(m).length;v.update(r=>{const n=e?r.currentStreak+1:0,l=[...r.distribution];return l[t-1]++,{currentStreak:n,bestStreak:n>r.bestStreak?n:r.bestStreak,totalGames:r.totalGames+1,wonGames:r.wonGames+(e?1:0),distribution:l}});const a=s(W),u=ee(a);D.update(r=>{const n=r.guessTotals.map((l,i)=>i<t?l+(a[i+1]-a[i]):l);return{gameCount:r.gameCount+1,guessTotals:n,guessCounts:r.guessCounts.map((l,i)=>i<t?l+1:l),fastestGame:e&&(r.fastestGame===0||u<r.fastestGame)?u:r.fastestGame}})}function ce(e){const t=s(c);Z[t==="daily"?"lastDailyDetail":"lastRandomDetail"].set({mode:t,dayNumber:t==="daily"?s(K)+1:0,hardMode:s(se),answer:s(p),guesses:s(m),guessTimes:s(W),hash:t==="daily"?null:re(s(p)),fastest:e})}function Me(e){Z[s(c)==="daily"?"guessTimesDaily":"guessTimesRandom"].update(t=>(t[e]=new Date().getTime(),t))}const h=o("wp-answer",""),T=o("wp-answerRandom",""),S=o("wp-guesses",[]),L=o("wp-guessesRandom",[]),b=o("wp-lastPlayedWasHard",!1),G=o("wp-lastPlayedRandomWasHard",!1),te=o("wp-hardMode",!1),fe=g(te,e=>e),me=e=>{if(!s(q)&&s(m).length>0)throw"Can't change that during a game!";te.set(e)},c=d("daily"),se=g([c,b,G],([e,t,a])=>e==="daily"?t:a),we=d(!1),ye=d(!1),he=d(!1),pe=d(!1),j=d([]),p=g([c,h,T],([e,t,a])=>e==="daily"?t:a),m=g([c,S,L],([e,t,a])=>e==="daily"?t:a);function De(e){(s(c)==="daily"?S:L).update(e)}const I=o("wp-guessTimesDaily",[]),J=o("wp-guessTimesRandom",[]),W=g([c,I,J],([e,t,a])=>e==="daily"?t:a),$=g(m,e=>e.length),ae=d(0),ne=g([p,m],([e,t])=>t.length>0&&t[t.length-1]===e),q=g([$,ne],([e,t])=>t||e===f),Se=g([j,$,ae,q],([e,t,a,u])=>u?new Set:Y(e,t,a));function Te(){m.subscribe(e=>{j.update(()=>{const t=oe();if(e.length===0)return t;for(let a=0;a<f;a++)if(a<e.length){const u=e[a];t[a]=[...u].map((r,n)=>ie(r,s(p),a,n,t))}else a>0&&a===e.length&&t[a].forEach((u,r)=>{u.letterBounds=le(Y(t,a,r))});return t})})}const z=o("wp-version",0),be=o("wp-locale",""),Ge=d(null),P=o("wp-highContrast",!1),E=o("wp-showAllHints",!1),N=o("wp-swapEnterBackspace",!1),B=o("wp-keyboardLayout","alphabetic"),O=o("wp-dyslexicFont",!1),_=o("wp-allowDancing",!0),F=o("wp-shareURL",!0),x=o("wp-shareTimes",!1),U=o("wp-preciseTimes",!1),K=o("wp-lastPlayedDaily",-1),v=o("wp-stats",V()),D=o("wp-timeStats",M()),R=o("wp-lastDailyDetail",null),C=o("wp-lastRandomDetail",null),ve=g([c,R,C],([e,t,a])=>e==="daily"?t:a),Re=d(!1),y=e=>!e||typeof e!="string"&&!(e instanceof String)||e.length!==de,A=(e,t)=>{if(!Array.isArray(e)||e.length!==f)return t;for(let a=0;a<e.length;a++)e[a]>=0||(e[a]=0);return e};function Ce(){[!0,!1].includes(s(P))||P.set(!1),[!0,!1].includes(s(E))||E.set(!1),[!0,!1].includes(s(N))||N.set(!1),[!0,!1].includes(s(O))||O.set(!1),[!0,!1].includes(s(_))||_.set(!0),[!0,!1].includes(s(F))||F.set(!0),[!0,!1].includes(s(x))||x.set(!1),[!0,!1].includes(s(U))||U.set(!1),ue.includes(s(B))||B.set("qwerty");const e=s(v);e.currentStreak>=0||(e.currentStreak=0),e.bestStreak>=0||(e.bestStreak=0),e.totalGames>=0||(e.totalGames=0),e.wonGames>=0||(e.wonGames=0),e.distribution=A(e.distribution,V().distribution),v.set(e);const t=s(D);t.gameCount>=0||(t.gameCount=0),t.fastestGame>=0||(t.fastestGame=0),t.guessTotals=A(t.guessTotals,M().guessTotals),t.guessCounts=A(t.guessCounts,M().guessCounts),D.set(t),[["daily",s(R)],["random",s(C)]].forEach(([r,n])=>{if(n!==null)try{if(n.mode!==r)throw"wrong mode";if(!(n.dayNumber>=0))throw"invalid day number";if(![!0,!1].includes(n.hardMode))throw"invalid hard mode setting";if(y(n.answer))throw"invalid answer";if(!Array.isArray(n.guesses)||n.guesses.length<1||n.guesses.length>f)throw"invalid guesses array";if(n.guesses.some(y))throw"invalid guess(es)";if(!Array.isArray(n.guessTimes)||n.guessTimes.length!==n.guesses.length+1)throw"invalid guessTimes array";const l=new Date().getTime();for(let i=0;i<n.guessTimes.length;i++)if(!(n.guessTimes[i]>=l-1e12))throw"invalid guess time"}catch{r==="daily"?R.set(null):C.set(null)}}),y(s(h))&&h.set(""),y(s(T))&&T.set(""),[!0,!1].includes(s(b))||b.set(!1),[!0,!1].includes(s(G))||G.set(!1),[[S,I],[L,J]].forEach(([r,n])=>{try{if(!Array.isArray(s(r))||s(r).length>f||s(r).some(y))throw"invalid guess(es)";if(!Array.isArray(s(n))||s(n).length!==s(r).length+1)throw"invalid guessTimes array";const l=new Date().getTime();for(let i=0;i<s(n).length;i++)if(!(s(n)[i]>=l-1e12))throw"invalid guess time"}catch{r.set([]),n.set([])}})}const Le=1,X=s(z);(!X||X<1)&&(K.set(-1),h.set(""),S.set([]));z.set(Le);Ce();export{v as A,D as B,F as C,x as D,m as E,se as F,ve as G,S as H,h as I,U as J,me as K,T as L,Te as M,L as N,Z as a,j as b,$ as c,O as d,we as e,pe as f,q as g,P as h,he as i,ae as j,_ as k,K as l,c as m,ye as n,Ge as o,p,fe as q,Me as r,be as s,ne as t,De as u,Se as v,Re as w,Ae as x,B as y,N as z};
