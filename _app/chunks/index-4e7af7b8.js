import{$ as r}from"./index-3a3d0142.js";import{w as g,_ as ee,d as f}from"./preload-helper-b55195a1.js";var te=Object.freeze(Object.defineProperty({__proto__:null,get storeVersion(){return Z},get storedLocale(){return Me},get openScreen(){return _e},get highContrast(){return z},get showAllHints(){return j},get swapEnterBackspace(){return q},get keyboardLayout(){return B},get dyslexicFont(){return N},get allowDancing(){return I},get shareURL(){return K},get shareTimes(){return F},get lastPlayedDaily(){return X},get stats(){return C},get timeStats(){return R},get lastDailyDetail(){return M},get lastRandomDetail(){return _},get lastGameDetail(){return Ae},get newUser(){return He},get answerDaily(){return v},get answerRandom(){return W},get guessesDaily(){return G},get guessesRandom(){return A},get lastPlayedDailyWasHard(){return E},get lastPlayedRandomWasHard(){return L},get hardMode(){return Re},get changeHardMode(){return Te},get gameMode(){return w},get lastPlayedWasHard(){return ue},get invalidHardModeGuess(){return Ge},get notEnoughLetters(){return ke},get invalidWord(){return We},get invalidWordPreview(){return Ee},get boardContent(){return U},get answer(){return S},get guesses(){return y},get updateGuesses(){return Le},get guessTimesDaily(){return $},get guessTimesRandom(){return J},get guessTimes(){return H},get currentRow(){return Q},get currentTile(){return de},get gameWon(){return ce},get gameFinished(){return Y},get validLetters(){return Ce},get initGameState(){return ge}},Symbol.toStringTag,{value:"Module"})),P={};function u(e,t){const s=typeof localStorage!="undefined";function o(a,n){!s||localStorage.setItem(a,JSON.stringify(n))}if(!P[e]){const a=g(t,l=>{const d=s?localStorage.getItem(e):null;if(d&&l(JSON.parse(d)),s){const h=p=>{p.key===e&&l(p.newValue?JSON.parse(p.newValue):null)};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)}}),{subscribe:n,set:i}=a;P[e]={set(l){o(e,l),i(l)},update(l){const d=l(r(a));o(e,d),i(d)},subscribe:n}}return P[e]}const c=6,T=5;let b;async function se(){b||(b=(await ee(()=>import("./targets-filtered-ad800e36.js"),[])).default)}let k;async function we(){k||(k=(await ee(()=>import("./dictionary-filtered-f84f8acf.js"),[])).default)}async function je(e){return k||await we(),k.includes(e)}function ae(){const e=[];for(let t=0;t<c;t++){const s=[];e[t]=s;for(let o=0;o<T;o++)s.push({id:o,letter:"",scored:!1,distance:0,magnitude:0,polarity:0})}return e}function me(e,t,s,o,a){const n=m.indexOf(e)-m.indexOf(t[o]),i=n===0?0:n>0?1:-1;let l=0;if(s===0)l=c;else{const d=a[s-1][o];d.polarity!==i?l=c:Math.abs(n)>Math.abs(d.distance)?l=d.magnitude+1:Math.abs(n)<Math.abs(d.distance)&&(l=d.magnitude-1);const h=a.find((p,fe)=>fe<s&&p[o].letter===e);h&&(l=h[o].magnitude)}return n===0&&(l=0),{id:o,scored:!0,distance:n,magnitude:l,polarity:i,letter:e}}function ne(e,t,s){if(s===T)return new Set;const o=new Set(m);return m.forEach(a=>{if(!!o.has(a))for(let n=0;n<t;n++){const i=e[n][s];i.distance===0&&a!==i.letter&&o.delete(a),i.distance<0&&a<=i.letter&&o.delete(a),i.distance>0&&a>=i.letter&&o.delete(a)}}),o}function ye(e){return e.map(t=>t.letter).join("")}function he(e){return[m.find(t=>e.has(t)),[...m].reverse().find(t=>e.has(t))]}function qe(e,t){const s=ye(e[t]);return!(s.length<T||s.includes(" "))}const re=new Date(2022,1,25),Be=()=>{let e=0;const t=new Date(re),s=new Date;for(s.setHours(0,0,0,0);t<s;)e++,t.setDate(t.getDate()+1);return e};async function Ne(e){return await se(),b[e%b.length]}const Ie=e=>{const t=new Date(re);let s=new Date(t);return s.setDate(t.getDate()+e+1),s};function pe(e){return e[Math.floor(Math.random()*e.length)]}async function Ke(){return await se(),pe(b)}function De(e){let t=0;for(const[s,o]of[...e].entries())t+=m.indexOf(o)<<s*5;return t.toString(36)}function Fe(e){if(!e)return!1;let t="";for(let s=0;s<T;s++)t+=m[(parseInt(e,36)&31<<s*5)>>s*5];return t.length===5&&t}const m="abcdefghijklmnopqrstuvwxyz".split(""),be=["alphabetic","qwerty","azerty","qwertz","dvorak","colemak"],Ue=[{value:"alphabetic",label:"Alphabetic",layout:[["a","b","c","d","e","f","g","h","i","j"],["k","l","m","n","o","p","q","r","s","t"],["u","v","w","x","y","z"]],wideKeysRow:2},{value:"qwerty",label:"QWERTY",layout:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],wideKeysRow:2},{value:"azerty",label:"AZERTY",layout:[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["z","x","c","v","b","n"]],wideKeysRow:2},{value:"qwertz",label:"QWERTZ",layout:[["q","w","e","r","t","z","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["y","x","c","v","b","n","m"]],wideKeysRow:2},{value:"dvorak",label:"Dvorak",layout:[["p","y","f","g","c","r","l"],["a","o","e","u","i","d","h","t","n","s"],["q","j","k","x","b","m","w","v","z"]],wideKeysRow:0},{value:"colemak",label:"Colemak",layout:[["q","w","f","p","g","j","l","u","y"],["a","r","s","t","d","h","n","e","i","o"],["z","x","c","v","b","k","m"]],wideKeysRow:2}],oe=()=>({currentStreak:0,bestStreak:0,totalGames:0,wonGames:0,distribution:new Array(c).fill(0)}),O=()=>({gameCount:0,guessTotals:new Array(c).fill(0),guessCounts:new Array(c).fill(0),fastestGame:0}),ie=e=>e[e.length-1]-e[0];function $e(e){const t=r(void 0);t&&console.log("Start finishGame function");const s=r(w);let o=!1;s==="daily"&&(o=ie(r(H))<r(R).fastestGame,t&&console.log("Calling updateStats"),ve(e)),t&&console.log(`Calling saveGameDetail (fastest = ${o})`),Se(o)}function ve(e){const t=r(y).length;C.update(a=>{const n=e?a.currentStreak+1:0,i=[...a.distribution];return i[t-1]++,{currentStreak:n,bestStreak:n>a.bestStreak?n:a.bestStreak,totalGames:a.totalGames+1,wonGames:a.wonGames+(e?1:0),distribution:i}});const s=r(H),o=ie(s);R.update(a=>{const n=a.guessTotals.map((i,l)=>l<t?i+(s[l+1]-s[l]):i);return{gameCount:a.gameCount+1,guessTotals:n,guessCounts:a.guessCounts.map((i,l)=>l<t?i+1:i),fastestGame:a.fastestGame===0||o<a.fastestGame?o:a.fastestGame}})}function Se(e){const t=r(w);te[t==="daily"?"lastDailyDetail":"lastRandomDetail"].set({mode:t,dayNumber:t==="daily"?r(X)+1:0,hardMode:r(ue),answer:r(S),guesses:r(y),guessTimes:r(H),hash:t==="daily"?null:De(r(S)),fastest:e})}function Je(e){r(void 0)&&console.log(`Recording guess time for row ${e}`),te[r(w)==="daily"?"guessTimesDaily":"guessTimesRandom"].update(t=>(t[e]=new Date().getTime(),t))}const v=u("wp-answer",""),W=u("wp-answerRandom",""),G=u("wp-guesses",[]),A=u("wp-guessesRandom",[]),E=u("wp-lastPlayedWasHard",!1),L=u("wp-lastPlayedRandomWasHard",!1),le=u("wp-hardMode",!1),Re=f(le,e=>e),Te=e=>{if(!r(Y)&&r(y).length>0)throw"Can't change that during a game!";le.set(e)},w=g("daily"),ue=f([w,E,L],([e,t,s])=>e==="daily"?t:s),Ge=g(!1),ke=g(!1),We=g(!1),Ee=g(!1),U=g(ae()),S=f([w,v,W],([e,t,s])=>e==="daily"?t:s),y=f([w,G,A],([e,t,s])=>e==="daily"?t:s);function Le(e){(r(w)==="daily"?G:A).update(e)}const $=u("wp-guessTimesDaily",[]),J=u("wp-guessTimesRandom",[]),H=f([w,$,J],([e,t,s])=>e==="daily"?t:s),Q=f(y,e=>e.length),de=g(0),ce=f([S,y],([e,t])=>t.length>0&&t[t.length-1]===e),Y=f([Q,ce],([e,t])=>t||e===c),Ce=f([U,Q,de,Y],([e,t,s,o])=>o?new Set:ne(e,t,s));function ge(){y.subscribe(e=>{U.update(t=>{const s=ae();return t.forEach((o,a)=>{if(a<e.length){const n=e[a];s[a]=[...n].map((i,l)=>me(i,r(S),a,l,t))}else a>0&&a===e.length&&s[a].forEach((n,i)=>{n.letterBounds=he(ne(s,a,i))})}),s})})}const Z=u("wp-version",0),Me=u("wp-locale",""),_e=g(null),z=u("wp-highContrast",!1),j=u("wp-showAllHints",!1),q=u("wp-swapEnterBackspace",!1),B=u("wp-keyboardLayout","alphabetic"),N=u("wp-dyslexicFont",!1),I=u("wp-allowDancing",!0),K=u("wp-shareURL",!0),F=u("wp-shareTimes",!1),X=u("wp-lastPlayedDaily",-1),C=u("wp-stats",oe()),R=u("wp-timeStats",O()),M=u("wp-lastDailyDetail",null),_=u("wp-lastRandomDetail",null),Ae=f([w,M,_],([e,t,s])=>e==="daily"?t:s),He=g(!1),D=e=>!e||typeof e!="string"&&!(e instanceof String)||e.length!==T,x=(e,t)=>{if(!Array.isArray(e)||e.length!==c)return t;for(let s=0;s<e.length;s++)e[s]>=0||(e[s]=0);return e};function Pe(){[!0,!1].includes(r(z))||z.set(!1),[!0,!1].includes(r(j))||j.set(!1),[!0,!1].includes(r(q))||q.set(!1),[!0,!1].includes(r(N))||N.set(!1),[!0,!1].includes(r(I))||I.set(!0),[!0,!1].includes(r(K))||K.set(!0),[!0,!1].includes(r(F))||F.set(!1),be.includes(r(B))||B.set("qwerty");const e=r(C);e.currentStreak>=0||(e.currentStreak=0),e.bestStreak>=0||(e.bestStreak=0),e.totalGames>=0||(e.totalGames=0),e.wonGames>=0||(e.wonGames=0),e.distribution=x(e.distribution,oe().distribution),C.set(e);const t=r(R);t.gameCount>=0||(t.gameCount=0),t.fastestGame>=0||(t.fastestGame=0),t.guessTotals=x(t.guessTotals,O().guessTotals),t.guessCounts=x(t.guessCounts,O().guessCounts),R.set(t),[["daily",r(M)],["random",r(_)]].forEach(([a,n])=>{if(n!==null)try{if(n.mode!==a)throw"wrong mode";if(!(n.dayNumber>=0))throw"invalid day number";if(![!0,!1].includes(n.hardMode))throw"invalid hard mode setting";if(D(n.answer))throw"invalid answer";if(!Array.isArray(n.guesses)||n.guesses.length<1||n.guesses.length>c)throw"invalid guesses array";if(n.guesses.some(D))throw"invalid guess(es)";if(!Array.isArray(n.guessTimes)||n.guessTimes.length!==n.guesses.length+1)throw"invalid guessTimes array";const i=new Date().getTime();for(let l=0;l<n.guessTimes.length;l++)if(!(n.guessTimes[l]>=i-1e12))throw"invalid guess time"}catch{a==="daily"?M.set(null):_.set(null)}}),D(r(v))&&v.set(""),D(r(W))&&W.set(""),[!0,!1].includes(r(E))||E.set(!1),[!0,!1].includes(r(L))||L.set(!1),[[G,$],[A,J]].forEach(([a,n])=>{try{if(!Array.isArray(r(a))||r(a).length>c||r(a).some(D))throw"invalid guess(es)";if(!Array.isArray(r(n))||r(n).length!==r(a).length+1)throw"invalid guessTimes array";const i=new Date().getTime();for(let l=0;l<r(n).length;l++)if(!(r(n)[l]>=i-1e12))throw"invalid guess time"}catch{a.set([]),n.set([])}})}const xe=1,V=r(Z);(!V||V<1)&&(X.set(-1),v.set(""),G.set([]));Z.set(xe);Pe();ge();export{A as $,Le as A,ce as B,He as C,$e as D,Ue as E,B as F,q as G,m as H,C as I,R as J,pe as K,K as L,F as M,ue as N,Ae as O,G as P,X as Q,c as R,Be as S,v as T,Ie as U,Te as V,T as W,W as X,Fe as Y,Ke as Z,De as _,te as a,Ne as a0,U as b,Q as c,N as d,We as e,Ge as f,de as g,z as h,Ee as i,y as j,I as k,ae as l,w as m,ke as n,_e as o,Y as p,we as q,Je as r,Me as s,he as t,ye as u,Ce as v,S as w,je as x,qe as y,Re as z};
