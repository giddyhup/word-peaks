import{$ as n}from"./index-3a3d0142.js";import{w as g,_ as se,d as f}from"./preload-helper-b55195a1.js";var N=Object.freeze(Object.defineProperty({__proto__:null,get storeVersion(){return V},get storedLocale(){return Pe},get openScreen(){return _e},get highContrast(){return z},get showAllHints(){return j},get swapEnterBackspace(){return q},get keyboardLayout(){return B},get dyslexicFont(){return J},get allowDancing(){return U},get shareURL(){return I},get shareTimes(){return K},get lastPlayedDaily(){return ee},get stats(){return R},get timeStats(){return h},get lastDailyDetail(){return P},get lastRandomDetail(){return _},get lastGameDetail(){return $e},get newUser(){return Oe},get debugMode(){return M},get answerDaily(){return S},get answerRandom(){return E},get guessesDaily(){return k},get guessesRandom(){return $},get lastPlayedDailyWasHard(){return L},get lastPlayedRandomWasHard(){return C},get hardMode(){return Re},get changeHardMode(){return Ge},get gameMode(){return m},get lastPlayedWasHard(){return de},get invalidHardModeGuess(){return ke},get notEnoughLetters(){return Me},get invalidWord(){return We},get invalidWordPreview(){return Ee},get boardContent(){return F},get answer(){return T},get guesses(){return y},get updateGuesses(){return Le},get guessTimesDaily(){return Q},get guessTimesRandom(){return Y},get guessTimes(){return O},get currentRow(){return Z},get currentTile(){return ce},get gameWon(){return ge},get gameFinished(){return X},get validLetters(){return Ce},get initGameState(){return fe}},Symbol.toStringTag,{value:"Module"})),A={};function u(e,t){const s=typeof localStorage!="undefined";function i(o,a){!s||localStorage.setItem(o,JSON.stringify(a))}if(!A[e]){const o=g(t,r=>{const d=s?localStorage.getItem(e):null;if(d&&r(JSON.parse(d)),s){const p=b=>{b.key===e&&r(b.newValue?JSON.parse(b.newValue):null)};return window.addEventListener("storage",p),()=>window.removeEventListener("storage",p)}}),{subscribe:a,set:l}=o;A[e]={set(r){i(e,r),l(r)},update(r){const d=r(n(o));i(e,d),l(d)},subscribe:a}}return A[e]}const c=6,G=5;let v;async function ae(){v||(v=(await se(()=>import("./targets-filtered-ad800e36.js"),[])).default)}let W;async function we(){W||(W=(await se(()=>import("./dictionary-filtered-f84f8acf.js"),[])).default)}async function ze(e){return W||await we(),W.includes(e)}function ne(){const e=[];for(let t=0;t<c;t++){const s=[];e[t]=s;for(let i=0;i<G;i++)s.push({id:i,letter:"",scored:!1,distance:0,magnitude:0,polarity:0})}return e}function ye(e,t,s,i,o){const a=w.indexOf(e)-w.indexOf(t[i]),l=a===0?0:a>0?1:-1;let r=0;if(s===0)r=c;else{const d=o[s-1][i];d.polarity!==l?r=c:Math.abs(a)>Math.abs(d.distance)?r=d.magnitude+1:Math.abs(a)<Math.abs(d.distance)&&(r=d.magnitude-1);const p=o.find((b,me)=>me<s&&b[i].letter===e);p&&(r=p[i].magnitude)}return a===0&&(r=0),{id:i,scored:!0,distance:a,magnitude:r,polarity:l,letter:e}}function oe(e,t,s){if(s===G)return new Set;const i=new Set(w);return w.forEach(o=>{if(!!i.has(o))for(let a=0;a<t;a++){const l=e[a][s];l.distance===0&&o!==l.letter&&i.delete(o),l.distance<0&&o<=l.letter&&i.delete(o),l.distance>0&&o>=l.letter&&i.delete(o)}}),i}function he(e){return e.map(t=>t.letter).join("")}function pe(e){return[w.find(t=>e.has(t)),[...w].reverse().find(t=>e.has(t))]}function je(e,t){const s=he(e[t]);return!(s.length<G||s.includes(" "))}const re=new Date(2022,1,25),qe=()=>{let e=0;const t=new Date(re),s=new Date;for(s.setHours(0,0,0,0);t<s;)e++,t.setDate(t.getDate()+1);return e};async function Be(e){return await ae(),v[e%v.length]}const Je=e=>{const t=new Date(re);let s=new Date(t);return s.setDate(t.getDate()+e+1),s};function be(e){return e[Math.floor(Math.random()*e.length)]}async function Ue(){return await ae(),be(v)}function De(e){let t=0;for(const[s,i]of[...e].entries())t+=w.indexOf(i)<<s*5;return t.toString(36)}function Ie(e){if(!e)return!1;let t="";for(let s=0;s<G;s++)t+=w[(parseInt(e,36)&31<<s*5)>>s*5];return t.length===5&&t}const w="abcdefghijklmnopqrstuvwxyz".split(""),ve=["alphabetic","qwerty","azerty","qwertz","dvorak","colemak"],Ke=[{value:"alphabetic",label:"Alphabetic",layout:[["a","b","c","d","e","f","g","h","i","j"],["k","l","m","n","o","p","q","r","s","t"],["u","v","w","x","y","z"]],wideKeysRow:2},{value:"qwerty",label:"QWERTY",layout:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],wideKeysRow:2},{value:"azerty",label:"AZERTY",layout:[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["z","x","c","v","b","n"]],wideKeysRow:2},{value:"qwertz",label:"QWERTZ",layout:[["q","w","e","r","t","z","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["y","x","c","v","b","n","m"]],wideKeysRow:2},{value:"dvorak",label:"Dvorak",layout:[["p","y","f","g","c","r","l"],["a","o","e","u","i","d","h","t","n","s"],["q","j","k","x","b","m","w","v","z"]],wideKeysRow:0},{value:"colemak",label:"Colemak",layout:[["q","w","f","p","g","j","l","u","y"],["a","r","s","t","d","h","n","e","i","o"],["z","x","c","v","b","k","m"]],wideKeysRow:2}],ie=()=>({currentStreak:0,bestStreak:0,totalGames:0,wonGames:0,distribution:new Array(c).fill(0)}),x=()=>({gameCount:0,guessTotals:new Array(c).fill(0),guessCounts:new Array(c).fill(0),fastestGame:0}),le=e=>e[e.length-1]-e[0];function Fe(e){const t=n(M);t&&console.log("Start finishGame function");const s=n(m);let i=!1;s==="daily"&&(i=le(n(O))<n(h).fastestGame,t&&console.log("Calling updateStats"),Se(e)),t&&console.log(`Calling saveGameDetail (fastest = ${i})`),Te(i)}function Se(e){const t=n(M),s=n(y).length;t&&console.log("Updating store.stats"),R.update(a=>{t&&console.log(`Previous stats: ${JSON.stringify(a)}`),t&&console.log(`Previous streak: ${a.currentStreak}`);const l=e?a.currentStreak+1:0;t&&console.log(`New streak: ${l}`);const r=[...a.distribution];return t&&console.log(`Previous distribution: ${r}`),r[s-1]++,t&&console.log(`New distribution: ${r}`),{currentStreak:l,bestStreak:l>a.bestStreak?l:a.bestStreak,totalGames:a.totalGames+1,wonGames:a.wonGames+(e?1:0),distribution:r}}),t&&console.log(`Saved stats: ${JSON.stringify(n(R))}`);const i=n(O),o=le(i);t&&console.log("Updating store.timeStats"),t&&console.log(`gameTime = ${o}`),h.update(a=>{t&&console.log(`Previous timeStats: ${JSON.stringify(a)}`);const l=a.guessTotals.map((r,d)=>d<s?r+(i[d+1]-i[d]):r);return t&&console.log(`guessTotals = ${l}`),{gameCount:a.gameCount+1,guessTotals:l,guessCounts:a.guessCounts.map((r,d)=>d<s?r+1:r),fastestGame:a.fastestGame===0||o<a.fastestGame?o:a.fastestGame}}),t&&console.log(`Saved timeStats: ${JSON.stringify(n(h))}`)}function Te(e){const t=n(M),s=n(m);t&&console.log(`Saving game detail for mode: ${s}`),N[s==="daily"?"lastDailyDetail":"lastRandomDetail"].set({mode:s,dayNumber:s==="daily"?n(ee)+1:0,hardMode:n(de),answer:n(T),guesses:n(y),guessTimes:n(O),hash:s==="daily"?null:De(n(T)),fastest:e}),t&&console.log(`Saved game detail: ${JSON.stringify(n(N[s==="daily"?"lastDailyDetail":"lastRandomDetail"]))}`)}function Qe(e){n(M)&&console.log(`Recording guess time for row ${e}`),N[n(m)==="daily"?"guessTimesDaily":"guessTimesRandom"].update(t=>(t[e]=new Date().getTime(),t))}const S=u("wp-answer",""),E=u("wp-answerRandom",""),k=u("wp-guesses",[]),$=u("wp-guessesRandom",[]),L=u("wp-lastPlayedWasHard",!1),C=u("wp-lastPlayedRandomWasHard",!1),ue=u("wp-hardMode",!1),Re=f(ue,e=>e),Ge=e=>{if(!n(X)&&n(y).length>0)throw"Can't change that during a game!";ue.set(e)},m=g("daily"),de=f([m,L,C],([e,t,s])=>e==="daily"?t:s),ke=g(!1),Me=g(!1),We=g(!1),Ee=g(!1),F=g(ne()),T=f([m,S,E],([e,t,s])=>e==="daily"?t:s),y=f([m,k,$],([e,t,s])=>e==="daily"?t:s);function Le(e){(n(m)==="daily"?k:$).update(e)}const Q=u("wp-guessTimesDaily",[]),Y=u("wp-guessTimesRandom",[]),O=f([m,Q,Y],([e,t,s])=>e==="daily"?t:s),Z=f(y,e=>e.length),ce=g(0),ge=f([T,y],([e,t])=>t.length>0&&t[t.length-1]===e),X=f([Z,ge],([e,t])=>t||e===c),Ce=f([F,Z,ce,X],([e,t,s,i])=>i?new Set:oe(e,t,s));function fe(){y.subscribe(e=>{F.update(t=>{const s=ne();return t.forEach((i,o)=>{if(o<e.length){const a=e[o];s[o]=[...a].map((l,r)=>ye(l,n(T),o,r,t))}else o>0&&o===e.length&&s[o].forEach((a,l)=>{a.letterBounds=pe(oe(s,o,l))})}),s})})}const V=u("wp-version",0),Pe=u("wp-locale",""),_e=g(null),z=u("wp-highContrast",!1),j=u("wp-showAllHints",!1),q=u("wp-swapEnterBackspace",!1),B=u("wp-keyboardLayout","alphabetic"),J=u("wp-dyslexicFont",!1),U=u("wp-allowDancing",!0),I=u("wp-shareURL",!0),K=u("wp-shareTimes",!1),ee=u("wp-lastPlayedDaily",-1),R=u("wp-stats",ie()),h=u("wp-timeStats",x()),P=u("wp-lastDailyDetail",null),_=u("wp-lastRandomDetail",null),$e=f([m,P,_],([e,t,s])=>e==="daily"?t:s),Oe=g(!1),M=u("wp-debugMode",!1),D=e=>!e||typeof e!="string"&&!(e instanceof String)||e.length!==G,H=(e,t)=>{if(!Array.isArray(e)||e.length!==c)return t;for(let s=0;s<e.length;s++)e[s]>=0||(e[s]=0);return e};function Ae(){[!0,!1].includes(n(z))||z.set(!1),[!0,!1].includes(n(j))||j.set(!1),[!0,!1].includes(n(q))||q.set(!1),[!0,!1].includes(n(J))||J.set(!1),[!0,!1].includes(n(U))||U.set(!0),[!0,!1].includes(n(I))||I.set(!0),[!0,!1].includes(n(K))||K.set(!1),ve.includes(n(B))||B.set("qwerty");const e=n(R);e.currentStreak>=0||(e.currentStreak=0),e.bestStreak>=0||(e.bestStreak=0),e.totalGames>=0||(e.totalGames=0),e.wonGames>=0||(e.wonGames=0),e.distribution=H(e.distribution,ie().distribution),R.set(e);const t=n(h);t.gameCount>=0||(t.gameCount=0),t.fastestGame>=0||(t.fastestGame=0),t.guessTotals=H(t.guessTotals,x().guessTotals),t.guessCounts=H(t.guessCounts,x().guessCounts),h.set(t),[["daily",n(P)],["random",n(_)]].forEach(([o,a])=>{if(a!==null)try{if(a.mode!==o)throw"wrong mode";if(!(a.dayNumber>=0))throw"invalid day number";if(![!0,!1].includes(a.hardMode))throw"invalid hard mode setting";if(D(a.answer))throw"invalid answer";if(!Array.isArray(a.guesses)||a.guesses.length<1||a.guesses.length>c)throw"invalid guesses array";if(a.guesses.some(D))throw"invalid guess(es)";if(!Array.isArray(a.guessTimes)||a.guessTimes.length!==a.guesses.length+1)throw"invalid guessTimes array";const l=new Date().getTime();for(let r=0;r<a.guessTimes.length;r++)if(!(a.guessTimes[r]>=l-1e12))throw"invalid guess time"}catch{o==="daily"?P.set(null):_.set(null)}}),D(n(S))&&S.set(""),D(n(E))&&E.set(""),[!0,!1].includes(n(L))||L.set(!1),[!0,!1].includes(n(C))||C.set(!1),[[k,Q],[$,Y]].forEach(([o,a])=>{try{if(!Array.isArray(n(o))||n(o).length>c||n(o).some(D))throw"invalid guess(es)";if(!Array.isArray(n(a))||n(a).length!==n(o).length+1)throw"invalid guessTimes array";const l=new Date().getTime();for(let r=0;r<n(a).length;r++)if(!(n(a)[r]>=l-1e12))throw"invalid guess time"}catch{o.set([]),a.set([])}})}const He=1,te=n(V);(!te||te<1)&&(ee.set(-1),S.set(""),k.set([]));V.set(He);Ae();fe();export{De as $,Le as A,M as B,ge as C,Oe as D,Fe as E,Ke as F,B as G,q as H,w as I,R as J,h as K,be as L,I as M,K as N,de as O,$e as P,k as Q,c as R,ee as S,qe as T,S as U,Je as V,G as W,Ge as X,E as Y,Ie as Z,Ue as _,N as a,$ as a0,Be as a1,F as b,Z as c,J as d,We as e,ke as f,ce as g,z as h,Ee as i,y as j,U as k,ne as l,m,Me as n,_e as o,X as p,we as q,Qe as r,Pe as s,pe as t,he as u,Ce as v,T as w,ze as x,je as y,Re as z};
